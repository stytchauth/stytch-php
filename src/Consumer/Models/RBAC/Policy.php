<?php

// !!!
// WARNING: This file is autogenerated
// Only modify code within MANUAL() sections
// or your changes may be overwritten later!
// !!!

namespace Stytch\Consumer\Models\RBAC;

final class Policy
{
    /** An array of [Role objects](https://stytch.com/docs/api/rbac-role-object). */
    public array $roles;
    /** An array of [Resource objects](https://stytch.com/docs/api/rbac-resource-object). */
    public array $resources;
    public array $scopes;

    public function __construct(
        array $roles,
        array $resources,
        array $scopes
    ) {
        $this->roles = $roles;
        $this->resources = $resources;
        $this->scopes = $scopes;
    }

    /**
     * Create an instance from an array
     *
     * @param array $data
     * @return static
     */
    public static function fromArray(array $data): static
    {
        return new static(
            isset($data['roles']) ? array_map(fn ($item) => PolicyRole::fromArray($item), $data['roles']) : [],
            isset($data['resources']) ? array_map(fn ($item) => PolicyResource::fromArray($item), $data['resources']) : [],
            isset($data['scopes']) ? array_map(fn ($item) => PolicyScope::fromArray($item), $data['scopes']) : []
        );
    }

    /**
     * Convert to array
     *
     * @return array
     */
    public function toArray(): array
    {
        return [
            'roles' => $this->roles,
            'resources' => $this->resources,
            'scopes' => $this->scopes,
        ];
    }
}
