<?php

// !!!
// WARNING: This file is autogenerated
// Only modify code within MANUAL() sections
// or your changes may be overwritten later!
// !!!

namespace Stytch\B2B\Models\Discovery\Organizations;

final class CreateRequest
{
    /**
    * The Intermediate Session Token. This token does not necessarily belong to a specific instance of a
    * Member, but represents a bag of factors that may be converted to a member session. The token can be used
    * with the [OTP SMS Authenticate endpoint](https://stytch.com/docs/b2b/api/authenticate-otp-sms),
    * [TOTP Authenticate endpoint](https://stytch.com/docs/b2b/api/authenticate-totp), or
    * [Recovery Codes Recover endpoint](https://stytch.com/docs/b2b/api/recovery-codes-recover) to complete an
    * MFA flow and log in to the Organization. The token has a default expiry of 10 minutes. It can also be
    * used with the
    * [Exchange Intermediate Session endpoint](https://stytch.com/docs/b2b/api/exchange-intermediate-session)
    * to join a specific Organization that allows the factors represented by the intermediate session token;
    * or the
    * [Create Organization via Discovery endpoint](https://stytch.com/docs/b2b/api/create-organization-via-discovery) to create a new Organization and Member. Intermediate Session Tokens have a default expiry of 10 minutes.
     */
    public string $intermediateSessionToken;
    /**
    * Set the session lifetime to be this many minutes from now. This will start a new session if one doesn't
    * already exist,
    *   returning both an opaque `session_token` and `session_jwt` for this session. Remember that the
    * `session_jwt` will have a fixed lifetime of
    *   five minutes regardless of the underlying session duration, and will need to be refreshed over time.
    *
    *   This value must be a minimum of 5 and a maximum of 527040 minutes (366 days).
    *
    *   If a `session_token` or `session_jwt` is provided then a successful authentication will continue to
    * extend the session this many minutes.
    *
    *   If the `session_duration_minutes` parameter is not specified, a Stytch session will be created with a
    * 60 minute duration. If you don't want
    *   to use the Stytch session product, you can ignore the session fields in the response.
     */
    public ?int $sessionDurationMinutes = null;
    /**
    * Add a custom claims map to the Session being authenticated. Claims are only created if a Session is
    * initialized by providing a value in
    *   `session_duration_minutes`. Claims will be included on the Session object and in the JWT. To update a
    * key in an existing Session, supply a new value. To
    *   delete a key, supply a null value. Custom claims made with reserved claims (`iss`, `sub`, `aud`,
    * `exp`, `nbf`, `iat`, `jti`) will be ignored.
    *   Total custom claims size cannot exceed four kilobytes.
     */
    public ?array $sessionCustomClaims = null;
    /**
    * The name of the Organization. If the name is not specified, a default name will be created based on the
    * email used to initiate the discovery flow. If the email domain is a common email provider such as
    * gmail.com, or if the email is a .edu email, the organization name will be generated based on the name
    * portion of the email. Otherwise, the organization name will be generated based on the email domain.
     */
    public ?string $organizationName = null;
    /**
    * The unique URL slug of the Organization. A minimum of two characters is required. The slug only accepts
    * alphanumeric characters and the following reserved characters: `-` `.` `_` `~`. If the slug is not
    * specified, a default slug will be created based on the email used to initiate the discovery flow. If the
    * email domain is a common email provider such as gmail.com, or if the email is a .edu email, the
    * organization slug will be generated based on the name portion of the email. Otherwise, the organization
    * slug will be generated based on the email domain.
     */
    public ?string $organizationSlug = null;
    /**
    * An identifier that can be used in API calls wherever a organization_id is expected. This is a string
    * consisting of alphanumeric, `.`, `_`, `-`, or `|` characters with a maximum length of 128 characters.
    * External IDs must be unique within a project, but may be reused across different projects in the same
    * workspace.
     */
    public ?string $organizationExternalId = null;
    /** The image URL of the Organization logo. */
    public ?string $organizationLogoURL = null;
    /** An arbitrary JSON object for storing application-specific data or identity-provider-specific data. */
    public ?array $trustedMetadata = null;
    /**
    * The authentication setting that controls the JIT provisioning of Members when authenticating via SSO.
    * The accepted values are:
    *
    *   `ALL_ALLOWED` – the default setting, new Members will be automatically provisioned upon successful
    * authentication via any of the Organization's `sso_active_connections`.
    *
    *   `RESTRICTED` – only new Members with SSO logins that comply with
    * `sso_jit_provisioning_allowed_connections` can be provisioned upon authentication.
    *
    *   `NOT_ALLOWED` – disable JIT provisioning via SSO.
     */
    public ?string $ssoJITProvisioning = null;
    /**
    * An array of email domains that allow invites or JIT provisioning for new Members. This list is enforced
    * when either `email_invites` or `email_jit_provisioning` is set to `RESTRICTED`.
    *
    *
    *     Common domains such as `gmail.com` are not allowed. See the
    * [common email domains resource](https://stytch.com/docs/b2b/api/common-email-domains) for the full list.
     */
    public ?array $emailAllowedDomains = null;
    /**
    * The authentication setting that controls how a new Member can be provisioned by authenticating via Email
    * Magic Link or OAuth. The accepted values are:
    *
    *   `RESTRICTED` – only new Members with verified emails that comply with `email_allowed_domains` can be
    * provisioned upon authentication via Email Magic Link or OAuth.
    *
    *   `NOT_ALLOWED` – the default setting, disables JIT provisioning via Email Magic Link and OAuth.
     */
    public ?string $emailJITProvisioning = null;
    /**
    * The authentication setting that controls how a new Member can be invited to an organization by email.
    * The accepted values are:
    *
    *   `ALL_ALLOWED` – any new Member can be invited to join via email.
    *
    *   `RESTRICTED` – only new Members with verified emails that comply with `email_allowed_domains` can be
    * invited via email.
    *
    *   `NOT_ALLOWED` – disable email invites.
     */
    public ?string $emailInvites = null;
    /**
    * The setting that controls which authentication methods can be used by Members of an Organization. The
    * accepted values are:
    *
    *   `ALL_ALLOWED` – the default setting which allows all authentication methods to be used.
    *
    *   `RESTRICTED` – only methods that comply with `allowed_auth_methods` can be used for authentication.
    * This setting does not apply to Members with `is_breakglass` set to `true`.
     */
    public ?string $authMethods = null;
    /**
    * An array of allowed authentication methods. This list is enforced when `auth_methods` is set to
    * `RESTRICTED`.
    *   The list's accepted values are: `sso`, `magic_link`, `email_otp`, `password`, `google_oauth`,
    * `microsoft_oauth`, `slack_oauth`, `github_oauth`, and `hubspot_oauth`.
     */
    public ?array $allowedAuthMethods = null;
    /**
    * The setting that controls the MFA policy for all Members in the Organization. The accepted values are:
    *
    *   `REQUIRED_FOR_ALL` – All Members within the Organization will be required to complete MFA every time
    * they wish to log in. However, any active Session that existed prior to this setting change will remain
    * valid.
    *
    *   `OPTIONAL` – The default value. The Organization does not require MFA by default for all Members.
    * Members will be required to complete MFA only if their `mfa_enrolled` status is set to true.
     */
    public ?string $mfaPolicy = null;
    /**
    * Implicit role assignments based off of email domains.
    *   For each domain-Role pair, all Members whose email addresses have the specified email domain will be
    * granted the
    *   associated Role, regardless of their login method. See the
    * [RBAC guide](https://stytch.com/docs/b2b/guides/rbac/role-assignment)
    *   for more information about role assignment.
     */
    public ?array $rbacEmailImplicitRoleAssignments = null;
    /**
    * The setting that controls which MFA methods can be used by Members of an Organization. The accepted
    * values are:
    *
    *   `ALL_ALLOWED` – the default setting which allows all authentication methods to be used.
    *
    *   `RESTRICTED` – only methods that comply with `allowed_mfa_methods` can be used for authentication.
    * This setting does not apply to Members with `is_breakglass` set to `true`.
     */
    public ?string $mfaMethods = null;
    /**
    * An array of allowed MFA authentication methods. This list is enforced when `mfa_methods` is set to
    * `RESTRICTED`.
    *   The list's accepted values are: `sms_otp` and `totp`.
     */
    public ?array $allowedMfaMethods = null;
    /**
    * The authentication setting that controls how a new Member can JIT provision into an organization by
    * tenant. The accepted values are:
    *
    *   `RESTRICTED` – only new Members with tenants in `allowed_oauth_tenants` can JIT provision via tenant.
    *
    *   `NOT_ALLOWED` – the default setting, disables JIT provisioning by OAuth Tenant.
     */
    public ?string $oauthTenantJITProvisioning = null;
    /**
    * A map of allowed OAuth tenants. If this field is not passed in, the Organization will not allow JIT
    * provisioning by OAuth Tenant. Allowed keys are "slack", "hubspot", and "github".
     */
    public ?array $allowedOAuthTenants = null;
    /**
    * The authentication setting that sets the Organization's policy towards first party Connected Apps. The
    * accepted values are:
    *
    *   `ALL_ALLOWED` – the default setting, any first party Connected App in the Project is permitted for use
    * by Members.
    *
    *   `RESTRICTED` – only first party Connected Apps with IDs in `allowed_first_party_connected_apps` can be
    * used by Members.
    *
    *   `NOT_ALLOWED` – no first party Connected Apps are permitted.
     */
    public ?string $firstPartyConnectedAppsAllowedType = null;
    /**
    * An array of first party Connected App IDs that are allowed for the Organization. Only used when the
    * Organization's `first_party_connected_apps_allowed_type` is `RESTRICTED`.
     */
    public ?array $allowedFirstPartyConnectedApps = null;
    /**
    * The authentication setting that sets the Organization's policy towards third party Connected Apps. The
    * accepted values are:
    *
    *   `ALL_ALLOWED` – the default setting, any third party Connected App in the Project is permitted for use
    * by Members.
    *
    *   `RESTRICTED` – only third party Connected Apps with IDs in `allowed_first_party_connected_apps` can be
    * used by Members.
    *
    *   `NOT_ALLOWED` – no third party Connected Apps are permitted.
     */
    public ?string $thirdPartyConnectedAppsAllowedType = null;
    /**
    * An array of third party Connected App IDs that are allowed for the Organization. Only used when the
    * Organization's `third_party_connected_apps_allowed_type` is `RESTRICTED`.
     */
    public ?array $allowedThirdPartyConnectedApps = null;
    /**
    * If the `telemetry_id` is passed, as part of this request, Stytch will call the
    * [Fingerprint Lookup API](https://stytch.com/docs/fraud/api/fingerprint-lookup) and store the associated
    * fingerprints and IPGEO information for the Member. Your workspace must be enabled for Device
    * Fingerprinting to use this feature.
     */
    public ?string $telemetryId = null;

    public function __construct(
        string $intermediateSessionToken,
        ?int $sessionDurationMinutes = null,
        ?array $sessionCustomClaims = null,
        ?string $organizationName = null,
        ?string $organizationSlug = null,
        ?string $organizationExternalId = null,
        ?string $organizationLogoURL = null,
        ?array $trustedMetadata = null,
        ?string $ssoJITProvisioning = null,
        ?array $emailAllowedDomains = null,
        ?string $emailJITProvisioning = null,
        ?string $emailInvites = null,
        ?string $authMethods = null,
        ?array $allowedAuthMethods = null,
        ?string $mfaPolicy = null,
        ?array $rbacEmailImplicitRoleAssignments = null,
        ?string $mfaMethods = null,
        ?array $allowedMfaMethods = null,
        ?string $oauthTenantJITProvisioning = null,
        ?array $allowedOAuthTenants = null,
        ?string $firstPartyConnectedAppsAllowedType = null,
        ?array $allowedFirstPartyConnectedApps = null,
        ?string $thirdPartyConnectedAppsAllowedType = null,
        ?array $allowedThirdPartyConnectedApps = null,
        ?string $telemetryId = null
    ) {
        $this->intermediateSessionToken = $intermediateSessionToken;
        $this->sessionDurationMinutes = $sessionDurationMinutes;
        $this->sessionCustomClaims = $sessionCustomClaims;
        $this->organizationName = $organizationName;
        $this->organizationSlug = $organizationSlug;
        $this->organizationExternalId = $organizationExternalId;
        $this->organizationLogoURL = $organizationLogoURL;
        $this->trustedMetadata = $trustedMetadata;
        $this->ssoJITProvisioning = $ssoJITProvisioning;
        $this->emailAllowedDomains = $emailAllowedDomains;
        $this->emailJITProvisioning = $emailJITProvisioning;
        $this->emailInvites = $emailInvites;
        $this->authMethods = $authMethods;
        $this->allowedAuthMethods = $allowedAuthMethods;
        $this->mfaPolicy = $mfaPolicy;
        $this->rbacEmailImplicitRoleAssignments = $rbacEmailImplicitRoleAssignments;
        $this->mfaMethods = $mfaMethods;
        $this->allowedMfaMethods = $allowedMfaMethods;
        $this->oauthTenantJITProvisioning = $oauthTenantJITProvisioning;
        $this->allowedOAuthTenants = $allowedOAuthTenants;
        $this->firstPartyConnectedAppsAllowedType = $firstPartyConnectedAppsAllowedType;
        $this->allowedFirstPartyConnectedApps = $allowedFirstPartyConnectedApps;
        $this->thirdPartyConnectedAppsAllowedType = $thirdPartyConnectedAppsAllowedType;
        $this->allowedThirdPartyConnectedApps = $allowedThirdPartyConnectedApps;
        $this->telemetryId = $telemetryId;
    }

    /**
     * Create an instance from an array
     *
     * @param array $data
     * @return static
     */
    public static function fromArray(array $data): static
    {
        return new static(
            $data['intermediate_session_token'],
            $data['session_duration_minutes'] ?? null,
            $data['session_custom_claims'] ?? null,
            $data['organization_name'] ?? null,
            $data['organization_slug'] ?? null,
            $data['organization_external_id'] ?? null,
            $data['organization_logo_url'] ?? null,
            $data['trusted_metadata'] ?? null,
            $data['sso_jit_provisioning'] ?? null,
            $data['email_allowed_domains'] ?? null,
            $data['email_jit_provisioning'] ?? null,
            $data['email_invites'] ?? null,
            $data['auth_methods'] ?? null,
            $data['allowed_auth_methods'] ?? null,
            $data['mfa_policy'] ?? null,
            isset($data['rbac_email_implicit_role_assignments']) && $data['rbac_email_implicit_role_assignments'] !== null ? array_map(fn($item) => \Stytch\B2B\Models\Organizations\EmailImplicitRoleAssignment::fromArray($item), $data['rbac_email_implicit_role_assignments']) : null,
            $data['mfa_methods'] ?? null,
            $data['allowed_mfa_methods'] ?? null,
            $data['oauth_tenant_jit_provisioning'] ?? null,
            $data['allowed_oauth_tenants'] ?? null,
            $data['first_party_connected_apps_allowed_type'] ?? null,
            $data['allowed_first_party_connected_apps'] ?? null,
            $data['third_party_connected_apps_allowed_type'] ?? null,
            $data['allowed_third_party_connected_apps'] ?? null,
            $data['telemetry_id'] ?? null
        );
    }

    /**
     * Convert to array
     *
     * @return array
     */
    public function toArray(): array
    {
        return [
            'intermediate_session_token' => $this->intermediateSessionToken,
            'session_duration_minutes' => $this->sessionDurationMinutes,
            'session_custom_claims' => $this->sessionCustomClaims,
            'organization_name' => $this->organizationName,
            'organization_slug' => $this->organizationSlug,
            'organization_external_id' => $this->organizationExternalId,
            'organization_logo_url' => $this->organizationLogoURL,
            'trusted_metadata' => $this->trustedMetadata,
            'sso_jit_provisioning' => $this->ssoJITProvisioning,
            'email_allowed_domains' => $this->emailAllowedDomains,
            'email_jit_provisioning' => $this->emailJITProvisioning,
            'email_invites' => $this->emailInvites,
            'auth_methods' => $this->authMethods,
            'allowed_auth_methods' => $this->allowedAuthMethods,
            'mfa_policy' => $this->mfaPolicy,
            'rbac_email_implicit_role_assignments' => $this->rbacEmailImplicitRoleAssignments,
            'mfa_methods' => $this->mfaMethods,
            'allowed_mfa_methods' => $this->allowedMfaMethods,
            'oauth_tenant_jit_provisioning' => $this->oauthTenantJITProvisioning,
            'allowed_oauth_tenants' => $this->allowedOAuthTenants,
            'first_party_connected_apps_allowed_type' => $this->firstPartyConnectedAppsAllowedType,
            'allowed_first_party_connected_apps' => $this->allowedFirstPartyConnectedApps,
            'third_party_connected_apps_allowed_type' => $this->thirdPartyConnectedAppsAllowedType,
            'allowed_third_party_connected_apps' => $this->allowedThirdPartyConnectedApps,
            'telemetry_id' => $this->telemetryId,
        ];
    }
}
