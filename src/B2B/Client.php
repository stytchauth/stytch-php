<?php

// !!!
// WARNING: This file is autogenerated
// Only modify code within MANUAL() sections
// or your changes may be overwritten later!
// !!!

namespace Stytch\B2B;

use Stytch\Core\Client as CoreClient;
use Stytch\Shared\PolicyCache;
use Stytch\Shared\JwksCache;
use Stytch\Consumer\Api\ConnectedApp;
use Stytch\Consumer\Api\Debug;
use Stytch\B2B\Api\Discovery;
use Stytch\Consumer\Api\Fraud;
use Stytch\B2B\Api\IDP;
use Stytch\B2B\Api\Impersonation;
use Stytch\Consumer\Api\M2M;
use Stytch\B2B\Api\MagicLinks;
use Stytch\B2B\Api\OAuth;
use Stytch\B2B\Api\OTPs;
use Stytch\B2B\Api\Organizations;
use Stytch\B2B\Api\Passwords;
use Stytch\Consumer\Api\Project;
use Stytch\B2B\Api\RBAC;
use Stytch\B2B\Api\RecoveryCodes;
use Stytch\B2B\Api\SCIM;
use Stytch\B2B\Api\SSO;
use Stytch\B2B\Api\Sessions;
use Stytch\B2B\Api\TOTPs;

/**
 * Stytch API PHP client.
 *
 * Learn more at https://stytch.com/docs
 */
class Client
{
    private CoreClient $client;
    private string $projectId;
    private PolicyCache $policyCache;
    private JwksCache $jwksCache;

    public ConnectedApp $connected_app;
    public Debug $debug;
    public Discovery $discovery;
    public Fraud $fraud;
    public IDP $idp;
    public Impersonation $impersonation;
    public M2M $m2m;
    public MagicLinks $magic_links;
    public OAuth $oauth;
    public OTPs $otps;
    public Organizations $organizations;
    public Passwords $passwords;
    public Project $project;
    public RBAC $rbac;
    public RecoveryCodes $recovery_codes;
    public SCIM $scim;
    public SSO $sso;
    public Sessions $sessions;
    public TOTPs $totps;

    public function __construct(
        string $projectId,
        string $secret,
        ?string $environment = null,
        ?string $fraudEnvironment = null,
        ?string $customBaseUrl = null
    ) {
        $this->projectId = $projectId;
        $this->client = new CoreClient($projectId, $secret, $environment, $fraudEnvironment, $customBaseUrl);

        $this->policyCache = new PolicyCache();
        $this->jwksCache = new JwksCache($this->client, $this->projectId);

        $this->connected_app = new ConnectedApp($this->client);
        $this->debug = new Debug($this->client);
        $this->discovery = new Discovery($this->client);
        $this->fraud = new Fraud($this->client);
        $this->idp = new IDP($this->client, $this->projectId, $this->jwksCache, $this->policyCache);
        $this->impersonation = new Impersonation($this->client);
        $this->m2m = new M2M($this->client, $this->projectId, $this->jwksCache);
        $this->magic_links = new MagicLinks($this->client);
        $this->oauth = new OAuth($this->client);
        $this->otps = new OTPs($this->client);
        $this->organizations = new Organizations($this->client);
        $this->passwords = new Passwords($this->client);
        $this->project = new Project($this->client);
        $this->rbac = new RBAC($this->client);
        $this->recovery_codes = new RecoveryCodes($this->client);
        $this->scim = new SCIM($this->client);
        $this->sso = new SSO($this->client);
        $this->sessions = new Sessions($this->client, $this->projectId, $this->jwksCache, $this->policyCache);
        $this->totps = new TOTPs($this->client);
    }
}
